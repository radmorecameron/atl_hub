app-id: net.newpipe.NewPipe_unofficial
runtime: org.gnome.Platform
runtime-version: "48"
sdk: org.gnome.Platform
base: io.gitlab.android_translation_layer.BaseApp
base-version: stable
command: newpipe.sh
finish-args:
  - --share=network
  - --share=ipc
  - --socket=wayland
  - --socket=fallback-x11
  - --device=dri
  - --socket=pulseaudio
add-extensions:
  org.freedesktop.Platform.ffmpeg-full:
    version: "24.08"
    directory: lib/ffmpeg
    add-ld-path: .
    no-autodownload: false
    autodelete: false
cleanup-commands:
  - mkdir -p ${FLATPAK_DEST}/lib/ffmpeg
modules:
  - name: newpipe
    buildsystem: simple
    build-commands:
      - install -D net.newpipe.NewPipe_unofficial.apk
        /app/share/net.newpipe.NewPipe_unofficial.apk
      - install -D newpipe.sh /app/bin/newpipe.sh
      - install -D net.newpipe.NewPipe_unofficial_icon_512x512.png
        /app/share/icons/hicolor/512x512/apps/net.newpipe.NewPipe_unofficial.png
      - install -D net.newpipe.NewPipe_unofficial_icon_256x256.png
        /app/share/icons/hicolor/256x256/apps/net.newpipe.NewPipe_unofficial.png
      - install -D net.newpipe.NewPipe_unofficial_icon_192x192.png
        /app/share/icons/hicolor/192x192/apps/net.newpipe.NewPipe_unofficial.png
      - install -D net.newpipe.NewPipe_unofficial_icon_128x128.png
        /app/share/icons/hicolor/128x128/apps/net.newpipe.NewPipe_unofficial.png
      - install -D net.newpipe.NewPipe_unofficial_icon_64x64.png
        /app/share/icons/hicolor/64x64/apps/net.newpipe.NewPipe_unofficial.png
      - install -D net.newpipe.NewPipe_unofficial_icon_48x48.png
        /app/share/icons/hicolor/48x48/apps/net.newpipe.NewPipe_unofficial.png
      - install -D net.newpipe.NewPipe_unofficial_icon_32x32.png
        /app/share/icons/hicolor/32x32/apps/net.newpipe.NewPipe_unofficial.png
      - install -D net.newpipe.NewPipe_unofficial_icon_24x24.png
        /app/share/icons/hicolor/24x24/apps/net.newpipe.NewPipe_unofficial.png
      - install -D net.newpipe.NewPipe_unofficial_icon_16x16.png
        /app/share/icons/hicolor/16x16/apps/net.newpipe.NewPipe_unofficial.png
      - install -D net.newpipe.NewPipe_unofficial.desktop
        /app/share/applications/net.newpipe.NewPipe_unofficial.desktop
      - install -D net.newpipe.NewPipe_unofficial.metainfo.xml
        /app/share/metainfo/net.newpipe.NewPipe_unofficial.metainfo.xml
    sources:
      - type: file
        path: net.newpipe.NewPipe_unofficial.apk
      - type: file
        path: net.newpipe.NewPipe_unofficial.metainfo.xml
      - type: file
        path: net.newpipe.NewPipe_unofficial_icon_512x512.png
      - type: file
        path: net.newpipe.NewPipe_unofficial_icon_256x256.png
      - type: file
        path: net.newpipe.NewPipe_unofficial_icon_192x192.png
      - type: file
        path: net.newpipe.NewPipe_unofficial_icon_128x128.png
      - type: file
        path: net.newpipe.NewPipe_unofficial_icon_64x64.png
      - type: file
        path: net.newpipe.NewPipe_unofficial_icon_48x48.png
      - type: file
        path: net.newpipe.NewPipe_unofficial_icon_32x32.png
      - type: file
        path: net.newpipe.NewPipe_unofficial_icon_24x24.png
      - type: file
        path: net.newpipe.NewPipe_unofficial_icon_16x16.png
      - type: file
        path: net.newpipe.NewPipe_unofficial.desktop
      - type: file
        path: newpipe.sh
